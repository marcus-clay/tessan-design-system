---
import DocsLayout from '../../layouts/DocsLayout.astro';
import { colors } from '../../data/tokens';

function isDark(hex: string): boolean {
  const r = parseInt(hex.slice(1, 3), 16);
  const g = parseInt(hex.slice(3, 5), 16);
  const b = parseInt(hex.slice(5, 7), 16);
  return (r * 299 + g * 587 + b * 114) / 1000 < 128;
}

const groups = [
  { title: 'Brand', colors: colors.brand },
  { title: 'Surface', colors: colors.surface },
  { title: 'Secondary', colors: colors.secondary },
  { title: 'Neutral', colors: colors.neutral },
  { title: 'Semantic', colors: colors.semantic },
  { title: 'Status Backgrounds', colors: colors.status },
];
---
<DocsLayout title="Couleurs">
  <h1 class="font-heading text-3xl font-bold text-brand-primary mb-2">Couleurs</h1>
  <p class="text-neutral-gray-medium mb-10">Palette de couleurs du design system Tessan, extraite des variables Figma.</p>

  {groups.map((group) => (
    <section class="mb-10">
      <h2 class="font-heading text-xl font-semibold text-brand-primary mb-4">{group.title}</h2>
      <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
        {group.colors.map((color) => (
          <div class="bg-neutral-white rounded-xl overflow-hidden shadow-sm">
            <div
              class="h-20 flex items-end p-3"
              style={`background:${color.hex}`}
            >
              <span class={`text-[11px] font-mono ${isDark(color.hex) ? 'text-white/80' : 'text-black/60'}`}>
                {color.hex}
              </span>
            </div>
            <div class="p-3">
              <p class="text-sm font-medium text-brand-primary">{color.name}</p>
              <p class="text-[11px] text-neutral-gray-medium mt-0.5 font-mono">bg-{color.token}</p>
              <p class="text-[11px] text-neutral-gray-medium mt-0.5">{color.description}</p>
            </div>
          </div>
        ))}
      </div>
    </section>
  ))}
</DocsLayout>
