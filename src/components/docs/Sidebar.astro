---
import { dsNavigation, appNavigation } from '../../data/navigation';

interface Props {
  currentPath: string;
}
const { currentPath } = Astro.props;
const isAppSection = currentPath.startsWith('/app');
const activeNav = isAppSection ? appNavigation : dsNavigation;
---
<aside class="fixed top-0 left-0 w-64 h-screen bg-brand-primary overflow-y-auto flex flex-col z-50">
  <!-- Logo â€” links to landing -->
  <div class="px-6 py-5 border-b border-white/10">
    <a href="/" class="block">
      <span class="font-heading text-xl font-bold text-neutral-white tracking-wide">TESSAN</span>
    </a>
  </div>

  <!-- Section switcher -->
  <div class="px-4 pt-4 pb-2">
    <div class="flex bg-white/5 rounded-lg p-1">
      <a
        href="/overview"
        class:list={[
          'flex-1 text-center py-1.5 text-xs font-medium rounded-md transition-all',
          !isAppSection
            ? 'bg-brand-yellow text-brand-primary'
            : 'text-white/60 hover:text-white hover:bg-white/5',
        ]}
      >
        Design System
      </a>
      <a
        href="/app"
        class:list={[
          'flex-1 text-center py-1.5 text-xs font-medium rounded-md transition-all',
          isAppSection
            ? 'bg-brand-yellow text-brand-primary'
            : 'text-white/60 hover:text-white hover:bg-white/5',
        ]}
      >
        App Mobile
      </a>
    </div>
  </div>

  <!-- Navigation -->
  <nav class="flex-1 px-4 py-2 overflow-y-auto">
    {activeNav.map((group) => (
      <div class="mb-5">
        <h3 class="px-2 mb-1.5 text-[10px] font-semibold uppercase tracking-wider text-brand-teal-light">
          {group.title}
        </h3>
        <ul>
          {group.items.map((item) => {
            const isActive = currentPath === item.href || currentPath === item.href + '/';
            return (
              <li>
                <a
                  href={item.href}
                  class:list={[
                    'block px-3 py-1.5 rounded-md text-sm transition-colors',
                    isActive
                      ? 'bg-white/10 text-brand-yellow font-medium'
                      : 'text-white/70 hover:text-white hover:bg-white/5',
                  ]}
                >
                  {item.label}
                </a>
              </li>
            );
          })}
        </ul>
      </div>
    ))}
  </nav>

  <div class="px-6 py-4 border-t border-white/10 text-[11px] text-white/40">
    v1.0.0
  </div>
</aside>
